<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation Javascript ES6</title>
    <link rel="stylesheet" href="../css/style.css" />
    <script>
        let maVariable = null;
        console.log(maVariable === undefined);
        console.log(maVariable === null);

        // avant es6
        /*
        var tableau = new Array('toto', 12, 13.2);
        */

        let tableau = ['toto', 12, 13.2];
        console.log(tableau);
        console.log(tableau.length);

        let cars = ['Peugeot', 'Citroën', 'Renault'];
        console.log(cars);

        console.log(cars[1]);

        cars[cars.length] = 'Ford';
        console.log(cars);

        cars.push('Toyota');
        cars.push('Hyundai', 'Yahama');
        console.log(cars);

        console.log(`Le tableau cars contient ${cars.length} élément(s)`);
        console.log(`L'index max du tableau cars est ${cars.length - 1} `);

        // les tableaux sont l'équivalent d'objets itérable => que l'on peut parcourir
        console.log('---------- boucle for ------------');
        /*
        algorithme
        pour i à la valeur 0, jusqu'à i inférieur strictement à nombre d'élément du tableau cars, par pas de 1
        // code de la boucle
        fin pour
        */
       
       for(let i = 0; i < cars.length; i = i + 1 ){
           console.log(`à l'index ${i} du tableau cars, la valeur est ${cars[i]}`);
        }
        
        console.log('---------- boucle for (à l\'envers) ------------');
        for(let i = cars.length-1; i >= 0; i = i - 1 ){
           console.log(`à l'index ${i} du tableau cars, la valeur est ${cars[i]}`);
        }
        
        console.log('---------- boucle for in ------------');
        for(let index in cars){
            console.log(`à l'index ${index} du tableau cars, la valeur est ${cars[index]}`);
        }
        
        console.log('---------- boucle for of ------------');
        for(let valeur of cars){
            console.log(`la valeur actuelle dans cars est ${valeur}`);
        }
        
        let prenom = 'toto';
        
        /* l'objet litéral */
        console.log('---- obj litéral ---');

        let obj = {
            nom: 'Sno',
            prenom: 'Jon',
            job: 'Le mur',
            age: 15,
            connaissance: function(){
                return `you know nothing ${this.prenom} ${this.nom}`;
            }
        };

        //console.table(console);
        console.log(obj);
        console.log(obj.nom);
        console.log(obj.connaissance());
        
        for(let clef in obj){
            console.log(clef, obj[clef]);
        }
        
        console.log('---------- boucle while ------------');
        let cpt = 0;
        while(cpt < cars.length){
            console.log(cars[cpt]);
            cpt = cpt + 1;
        }
        
        console.log('---------- boucle do while ------------');
        cpt = 0;
        do{
            console.log(cars[cpt]);
            cpt = cpt + 1;
        }while(cpt < cars.length ^ cars[cpt] === 'Ford')
        
        console.log('---------- boucle do while ------------');
        cpt = 0;
        do{
            if(cars[cpt] === 'Ford'){
                break;
            }
            console.log(cars[cpt]);
            cpt = cpt + 1;
        }while(cpt < cars.length)
        
        console.log('---------- méthode .map() ------------');
        cars.map( function(valeur, index, tableau){
            console.log(valeur, index, tableau);
            /*if(valeur === 'Ford'){
                tableau[index] = 'Fiat';
            }*/
            //tableau[index] = `marque : ${tableau[index]}`;
        } );
        
        console.log('---------- méthode .forEach() ------------');
        cars.forEach( function(valeur, index, tableau){
            console.log(valeur, index, tableau);
            /*if(valeur === 'Ford'){
                tableau[index] = 'Fiat';
            }*/
            //tableau[index] = `marque : ${tableau[index]}`;
        } );
        
        cars.push('Fiat');
        
        // supprimer une ou des valeurs d'un tableau
        console.log(cars);
        console.log('---------- extraire / supprimer des valeurs ------------');
        // extraire la dernière valeur d'un tableau .pop()
        console.log('---------- extraire la dernière valeur .pop() ------------');
        let lastEntry = cars.pop();
        console.log(lastEntry, cars);
        
        // extraire la première valeur d'un tableau .shift()
        console.log('---------- extraire la première valeur .shift() ------------');
        let firstEntry = cars.shift();
        console.log(firstEntry, cars);

        // extraire / ajouter / remplacer une ou des valeurs dans un tableau .splice()
        console.log('---------- extraire / ajouter / remplacer une ou des valeurs dans un tableau .splice() ------------');
        // .splice() 1 : extraire des valeurs du tableau
        console.log('--- extractions sans remplacement ---');
        console.log(cars.indexOf('Renault'));
        //console.log('toto'.indexOf('o'));
        //let test = 'toto'.split('').reverse().join('');
        //console.log(test);
        let removed = cars.splice(cars.indexOf('Renault'), 2);
        console.log(removed, cars);
        
        // .splice() 2 : remplacer des valeurs extraites du tableau
        console.log('--- extractions avec remplacement ---');
        let replaced = cars.splice(cars.indexOf('Toyota'), 1, 'Alpine', 'Mazda');
        console.log(replaced, cars);

        // .splice() 3 : inserrer des valeurs dans le tableau
        console.log('--- insertion de valeurs ---');
        cars.splice(cars.indexOf('Mazda'), 0, firstEntry, lastEntry, removed[0], removed[1], replaced[0]);
        console.log(cars);
        
        console.log('--- copier un tableu ou une série de valeur d\'un tableau dans un autre tableau ---');
        let carsClone = cars.slice(2, 5);
        console.log(cars, carsClone);
        carsClone.pop();
        console.log(cars, carsClone);
        console.log('--- tableaux 2d ----');
        // les tableaux à 2 dimensions
        let carsYear = [
            ['Fiat', 1956],
            ['Kya', 1995],
            ['Kya', 1990],
            ['Ford', 1950],
            ['12', '2001', 123],
            ['12', '0250']
        ];
        
        console.table(cars);
        console.table(carsYear);
        carsYear.sort();
        // attention, sort() transforme les données nombre en chaîne de caractère et tri par ordre alphabétique
        console.table(carsYear);
        
        console.table(carsYear[3]);
        console.log(carsYear[3][1]);
        
        // parcourir un tableau 2d
        console.log('--- parcour tableaux 2d ----');
        // utilisation de for imbriqués

        for(let i = 0; i < carsYear.length; i = i + 1){
            for(let j = 0; j < carsYear[i].length; j = j + 1){
                console.log(carsYear[i][j]);
            }
        }
        
        // recherche de la première occurence d'un élément / condition dans un tableau
        console.log('--- recherche de la première occurence d\'un élément dans un tableau ---');
        // .find()
        let arrayNumber = [5, 8, 12, 130, 3, 44];

        let found = arrayNumber.find( function(element){
            /*
            if(element > 20){
                return element;
            }
            */
            /*
            if(element > 20)
                return element;
            */
            return element > 20;
        });

        console.log(found);

        // recherche de toutes les occurence d'un élément / condition dans un tableau
        
        console.log('--- recherche de toutes les occurences d\'un élément / condition  dans un tableau ---');
        // .filter()
        /*
        let filtered = arrayNumber.filter( function(element){
            return element > 20;
        });
        */
        let filtered = arrayNumber.filter( (element)=>element > 20);

        console.log(filtered);

        /* conséquences */

        console.log('---- les conséquences (opérateur flèche ou arrow operator) ----');
        let monObjet = {
            number: [5, 8, 12, 130, 3, 44],
            affTab: function(){
                console.log(this);
                // conséquence sans l'opérateur flèche on perd la référence this de l'objet
                this.number.forEach( function(element){
                    console.log(this);
                });
                //avec l'opérateur flèche, on conserve la référence this de l'objet
                this.number.forEach( (element)=>{
                    console.log(this);
                });
            }
        };
        
        monObjet.affTab();

    </script>
</head>

<body>
    <header>
        <h1>Formation Javascript</h1>
    </header>
    <nav>
        <ul>
            <li>
                Bases
                <ul>
                    <li>
                        <a href="../introduction/index.html">Intro</a>
                    </li>
                    <li>
                        <a href="../introduction/tableaux.html">Tableaux</a>
                    </li>
                    <li>
                        <a href="../introduction/fonctions.html">Fonctions</a>
                    </li>
                    <li>
                        <a href="../introduction/destructuration.html">Destructuration</a>
                    </li>
                    <li>
                        <a href="../introduction/storage.html">storage</a>
                    </li>
                </ul>
            </li>
            <li>
                DOM
                <ul>
                    <li>
                        <a href="../dom/index.html">Le DOM</a>
                    </li>
                    <li>
                        <a href="../dom/dom.html">Créer dans le DOM</a>
                    </li>
                    <li>
                        <a href="../dom/css.html">DOM et CSS</a>
                    </li>
                    <li>
                        <a href="../dom/data-attribute.html">Dataset</a>
                    </li>
                </ul>
            </li>
            <li>
                AJAX
                <ul>
                    <li>
                        <a href="../ajax/index.html">AJAX</a>
                    </li>
                    <li>
                        <a href="../ajax/fetch.html">Fetch</a>
                    </li>
                </ul>
            </li>
            <li>
                POO
                <ul>
                    <li>
                        <a href="../poo/index.html">POO</a>
                    </li>
                    <li>
                        <a href="../poo/collection.html">Collection</a>
                    </li>
                    <li>
                        <a href="../poo/module.html">Module</a>
                    </li>
                    <li>
                        <a href="../poo/classe.html">Classe</a>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>
    <main>
        <section>
            <article>
                <h2>Les tableaux</h2>
                <p>
                    Tout est dans la console
                </p>
            </article>
        </section>
    </main>
</body>
</html>